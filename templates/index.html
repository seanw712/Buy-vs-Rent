<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buy vs. Rent Financial Calculator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet">
</head>
<body>
    <div class="page-wrapper">
        <div class="container">
            <h1 class="mb-4">Buy vs. Rent Financial Calculator</h1>
            
            <!-- Convert to accordion -->
            <div class="accordion mb-4" id="explainerAccordion">
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#explainerContent">
                            <strong>Explainer & Assumptions</strong> -> Click to Read
                        </button>
                    </h2>
                    <div id="explainerContent" class="accordion-collapse collapse" data-bs-parent="#explainerAccordion">
                        <div class="accordion-body">
                            <div class="explainer-content">
                                <p>This calculator compares the financial outcomes of renting versus buying a home by analyzing three scenarios:</p>
                                
                                <ol>
                                    <li>Continue renting</li>
                                    <li>Buy with minimum down payment (maximum mortgage)</li>
                                    <li>Buy using all available savings as down payment (minimum mortgage)</li>
                                </ol>

                                <h6 class="mt-4">Assumptions:</h6>
                                <ul class="assumptions-list">
                                    <li>
                                        <strong>Investment returns:</strong> Any surplus money after expenses and housing costs is invested at the 
                                        <span class="variable-highlight">Investment Return Rate</span> (use bank interest rate if not planning to invest)
                                    </li>
                                    <li>
                                        <strong>Income and rent growth:</strong> Both disposable income (<span class="variable-highlight">Monthly Savings</span> + 
                                        <span class="variable-highlight">Current Rent</span>) and rent payments increase annually with 
                                        <span class="variable-highlight">Consumer Price Inflation</span>
                                    </li>
                                    <li>
                                        <strong>Property appreciation:</strong> Home value grows according to the 
                                        <span class="variable-highlight">House Price Inflation Rate</span>
                                    </li>
                                    <li>
                                        <strong>Housing costs:</strong> <span class="variable-highlight">Average Monthly Housing Cost</span> 
                                        calculates the mean rent/mortgage payment over your <span class="variable-highlight">Time Horizon</span>
                                    </li>
                                    <li>
                                        <strong>Mortgage-free period:</strong> If <span class="variable-highlight">Time Horizon</span> exceeds 
                                        <span class="variable-highlight">Mortgage Term</span>, the calculator accounts for years without mortgage payments
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="main-content">
                <!-- Input Section -->
                <div class="input-section">
                    <h5>Input Parameters</h5>
                    <form id="calculatorForm">
                        <div class="form-group">
                            <label for="initial_savings">Initial Savings (€)</label>
                            <small class="form-text text-muted d-block mb-2">Your current total savings that you are comfortable investing (house or investments)</small>
                            <input type="number" class="form-control" id="initial_savings" value="{{ config.DEFAULT_INITIAL_SAVINGS }}" required>
                        </div>
                        <div class="form-group">
                            <label for="house_cost">House Cost (€)</label>
                            <small class="form-text text-muted d-block mb-2">Your share of the house price, if you will be buying a house together.</small>
                            <input type="number" class="form-control" id="house_cost" value="{{ config.DEFAULT_HOUSE_COST }}" required>
                        </div>
                        <div class="form-group">
                            <label for="monthly_rent">Rent/Month (€)</label>
                            <input type="number" class="form-control" id="monthly_rent" value="{{ config.DEFAULT_MONTHLY_RENT }}" required>
                        </div>
                        <div class="form-group">
                            <label for="monthly_savings_capacity">Monthly Savings (€)</label>
                            <small class="form-text text-muted d-block mb-2">Remaining income after all expenses and rent, available for investing.</small>
                            <input type="number" class="form-control" id="monthly_savings_capacity" value="{{ config.DEFAULT_MONTHLY_SAVINGS_CAPACITY}}" required>
                        </div>
                        <div class="form-group">
                            <label for="time_horizon_years">Time Horizon (Years)</label>
                            <input type="number" class="form-control" id="time_horizon_years" value="{{ config.DEFAULT_TIME_HORIZON_YEARS }}">
                        </div>
                        
                        <div class="accordion mb-3" id="advancedOptions">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#advancedPanel">
                                        Advanced Options
                                    </button>
                                </h2>
                                <div id="advancedPanel" class="accordion-collapse collapse">
                                    <div class="accordion-body">
                                        <div class="form-group">
                                            <label for="mortgage_term_years">Mortgage Term (Years)</label>
                                            <input type="number" class="form-control" id="mortgage_term_years" value="{{ config.DEFAULT_MORTGAGE_TERM_YEARS }}">
                                        </div>
                                        <div class="form-group">
                                            <label for="min_down_payment_percent">Minimum Down Payment (%)</label>
                                            <input type="number" class="form-control" id="min_down_payment_percent" value="15" min="0" max="100" step="1" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="house_purchase_fees_percent">Purchase Costs (%)</label>
                                            <small class="form-text text-muted d-block mb-2">Notary fees etc. associated with buying a house</small>
                                            <input type="number" class="form-control" id="house_purchase_fees_percent" value="7" min="0" max="20" step="1" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="house_inflation">House Price Inflation Rate (%)</label>
                                            <input type="number" class="form-control" id="house_inflation" value="{{ config.DEFAULT_HOUSE_PRICE_INFLATION * 100 }}" step="0.1">
                                        </div>
                                        <div class="form-group">
                                            <label for="investment_return">Investment Return Rate (%)</label>
                                            <input type="number" class="form-control" id="investment_return" value="{{ config.DEFAULT_INVESTMENT_RETURN * 100 }}" step="0.1">
                                        </div>
                                        <div class="form-group">
                                            <label for="mortgage_rate">Mortgage Interest Rate (%)</label>
                                            <input type="number" class="form-control" id="mortgage_rate" value="{{ config.DEFAULT_MORTGAGE_RATE * 100 }}" step="0.1">
                                        </div>
                                        <div class="form-group">
                                            <label for="cpi">Consumer Price Inflation (%)</label>
                                            <input type="number" class="form-control" id="cpi" value="{{ config.DEFAULT_CPI * 100 }}" step="0.1">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">Calculate</button>
                    </form>
                </div>
                
                <!-- Results Section -->
                <div class="results-section">
                    <h5>Results</h5>
                    <div id="resultsArea" style="display: none;">
                        <div class="chart-container">
                            <canvas id="netWorthChart"></canvas>
                        </div>
                        <div class="net-worth-summary">
                            <div class="table-container">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Component</th>
                                            <th>Rent + Invest</th>
                                            <th>Max Mortgage</th>
                                            <th>Min Mortgage</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Growth of Initial Savings</td>
                                            <td class="text-end"></td>
                                            <td class="text-end"></td>
                                            <td class="text-end"></td>
                                        </tr>
                                        <tr>
                                            <td>Growth of Monthly Savings</td>
                                            <td class="text-end"></td>
                                            <td class="text-end"></td>
                                            <td class="text-end"></td>
                                        </tr>
                                        <tr>
                                            <td>House Value</td>
                                            <td class="text-end">-</td>
                                            <td class="text-end"></td>
                                            <td class="text-end"></td>
                                        </tr>
                                        <tr class="table-primary">
                                            <th>Net Worth</th>
                                            <td class="text-end"></td>
                                            <td class="text-end"></td>
                                            <td class="text-end"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="additional-info mt-4 mb-4">
                            <h5>Additional Information</h5>
                            <div class="table-container">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Component</th>
                                            <th>Rent + Invest</th>
                                            <th>Max Mortgage</th>
                                            <th>Min Mortgage</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Total Interest + Purchase Costs</td>
                                            <td class="text-end">-</td>
                                            <td class="text-end"></td>
                                            <td class="text-end"></td>
                                        </tr>
                                        <tr>
                                            <td>Total Rent Paid</td>
                                            <td class="text-end"></td>
                                            <td class="text-end">-</td>
                                            <td class="text-end">-</td>
                                        </tr>
                                        <tr>
                                            <td>Average Monthly Housing Cost</td>
                                            <td class="text-end"></td>
                                            <td class="text-end"></td>
                                            <td class="text-end"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div id="loadingSpinner" class="text-center" style="display: none;">
                        <div class="spinner-border" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html> 